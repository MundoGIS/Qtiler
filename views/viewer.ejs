<!--
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
  Copyright (C) 2025 MundoGIS.
-->
<%
  // Inline viewer styles were moved to /public/css/viewer.css
  const viewerStyles = [
    {
      href: 'https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css',
      integrity: 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=',
      crossorigin: 'anonymous'
    },
    { href: '/css/viewer.css' }
  ];
  const viewerScripts = [
    {
      src: 'https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js',
      integrity: 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=',
      crossorigin: 'anonymous'
    },
    { src: 'https://cdn.jsdelivr.net/npm/proj4@2.9.1/dist/proj4.js', crossorigin: 'anonymous' },
    { src: 'https://cdn.jsdelivr.net/npm/proj4leaflet@1.0.2/src/proj4leaflet.min.js', crossorigin: 'anonymous' }
  ];
%>
<%- include('partials/html-open', {
  pageLang,
  pageTitle: 'Qtiler Â· Tile viewer',
  pageTitleI18nKey: 'viewer.pageTitle',
  extraStyles: viewerStyles,
  headScripts: viewerScripts
}) %>
    <script src="/js/viewer.js?v=<%= encodeURIComponent(assetVersion || '') %>"></script>
  <div class="viewer-shell">
    <%- include('partials/header', {
      headerMode: 'viewer',
      headerTaglineKey: 'viewer.tagline',
      headerTaglineText: 'Tile viewer',
      activeNav: typeof activeNav !== 'undefined' ? activeNav : null,
      user
    }) %>
    <main class="viewer-main">
      <div class="viewer-map-wrap">
        <div id="map"></div>
        <div id="info" class="info" data-i18n="viewer.loading">Loading...</div>
        <div id="zoom_display" class="zoom-display">Zoom: -</div>
        <div class="viewer-controls">
            <button type="button" id="viewer_cache_btn" class="viewer-control-btn" data-i18n="viewer.control.cacheStart">Cache on demand</button>
          <button type="button" id="viewer_extent_btn" class="viewer-control-btn" data-i18n="viewer.control.resetExtent">Reset extent</button>
          <button type="button" id="viewer_osm_btn" class="viewer-control-btn">Show OSM</button>
            <div id="viewer_cache_status" class="viewer-cache-status" aria-live="polite"></div>
        </div>
      </div>
    </main>
    <%- include('partials/footer', {
      footerClass: 'portal-footer',
      footerYearId: 'viewer_footer_year'
    }) %>
  </div>
<%- include('partials/html-close') %>