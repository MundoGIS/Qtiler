<!--
  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
  If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
  Copyright (C) 2025 MundoGIS.
-->
<%- include('partials/html-open', {
  pageLang,
  pageTitle: 'Qtiler · MundoGIS',
  headScripts: [
    { src: 'https://cdn.jsdelivr.net/npm/proj4@2.9.2/dist/proj4.min.js', crossorigin: 'anonymous' }
  ]
}) %>
    <div class="app-shell">
      <%- include('partials/header', { headerMode: 'dashboard', user, activeNav: activeNav || 'dashboard' }) %>

      <main class="app-main">
        <div id="auth_plugin_notice" class="app-notice app-notice-warning" role="alert" hidden>
          <div class="app-notice-body">
            <div class="app-notice-text">
              <h2 class="app-notice-heading" data-i18n="Authentication plugin unavailable">Authentication plugin unavailable</h2>
              <p data-i18n="You haven't purchased the authentication plugin yet? Contact MundoGIS or visit https://mundogis.se to learn more about this plugin.">You haven't purchased the authentication plugin yet? Contact MundoGIS or visit https://mundogis.se to learn more about this plugin.</p>
              <label class="app-notice-dismiss" for="auth_plugin_notice_dismiss">
                <input id="auth_plugin_notice_dismiss" type="checkbox">
                <span data-i18n="Don't show this again">Don't show this again</span>
              </label>
            </div>
            <div class="app-notice-actions">
              <a id="auth_plugin_notice_learn_more" class="btn btn-outline" href="https://mundogis.se" target="_blank" rel="noopener" data-i18n="Learn more">Learn more</a>
              <button id="auth_plugin_notice_close" class="btn btn-secondary" type="button" data-i18n="Close">Close</button>
            </div>
          </div>
        </div>
        <div class="main-layout">
          <aside class="control-panel">
          <div class="control-toolbar">
            <div class="control-actions">
              <button id="upload_project_btn" class="btn btn-primary" data-i18n="Upload project">Upload project</button>
              <input id="project_upload_input" type="file" accept=".qgz,.qgs" style="display:none" />
              <button id="reload" class="btn btn-secondary" data-i18n="Reload layers">Reload layers</button>
            </div>
          </div>
          <div class="control-grid">
            <div class="field"><span data-i18n="Min zoom:">Min zoom:</span> <input id="zoom_min" class="input-number" type="number" value="0" data-i18n-placeholder="Min zoom"></div>
            <div class="field"><span data-i18n="Max zoom:">Max zoom:</span> <input id="zoom_max" class="input-number" type="number" value="0" data-i18n-placeholder="Max zoom"></div>
            <div class="field"><span data-i18n="Mode:">Mode:</span>
              <select id="cache_mode" class="input-select">
                <option value="xyz" selected data-i18n="XYZ (EPSG:3857)">XYZ (EPSG:3857)</option>
                <option value="wmts" data-i18n="WMTS automatic (native CRS)">WMTS automatic (native CRS)</option>
                <option value="custom" data-i18n="Custom subdivision (bbox)">Custom subdivision (bbox)</option>
              </select>
            </div>
            <div class="field"><span data-i18n="Tile CRS:">Tile CRS:</span>
              <input id="tile_crs" class="input-text" type="text" placeholder="auto" value="EPSG:3857" data-i18n-placeholder="Tile CRS" />
            </div>
            <div class="field field-remote">
              <label class="checkbox">
                <input id="allow_remote" type="checkbox" checked>
                <span data-i18n="Allow remote (WMS/XYZ)">Allow remote (WMS/XYZ)</span>
              </label>
              <input id="throttle_ms" class="input-number" type="number" min="0" value="200" placeholder="throttle ms" title="Delay between tiles (ms) for remote services" data-i18n-placeholder="Delay between tiles (ms)" />
            </div>
          </div>
          </aside>

          <section class="content-panel">
            <div id="status"></div>
            <div id="jobs" class="jobs" style="display:none">
              <div class="jobs-heading" data-i18n="Running tasks">Running tasks</div>
              <div id="jobsList" class="list"></div>
            </div>
            <div id="layers" class="list">Loading layers…</div>
          </section>
        </div>
      </main>

      <footer class="app-footer">
        <div class="footer-inner">
          <div class="footer-brand">© <span id="footer_year"></span> MundoGIS</div>
          <div class="footer-links">
            <a href="https://mundogis.se" target="_blank" rel="noopener">mundogis.se</a>
            <a href="mailto:info@mundogis.se">info@mundogis.se</a>
          </div>
        </div>
      </footer>
    </div>

   <script src="/js/index.js"></script>
<%- include('partials/html-close') %>